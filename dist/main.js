document.addEventListener("DOMContentLoaded",(()=>{const e=document.getElementById("timer-fighter");console.log(e);const t=e.getContext("2d");e.width=1024,e.height=576,t.fillRect(0,0,e.width,e.height);class s{constructor(e){let{position:t,imageSrc:s,scale:i=1,framesMax:a=1,offset:r={x:0,y:0}}=e;this.position=t,this.width=50,this.height=125,this.image=new Image,this.image.src=s,this.scale=i,this.framesMax=a,this.framesCurrent=0,this.framesElapsed=0,this.framesHold=150,this.offset=r}draw(){t.drawImage(this.image,this.framesCurrent*(this.image.width/this.framesMax),0,this.image.width/this.framesMax,this.image.height,this.position.x-this.offset.x,this.position.y-this.offset.y,this.image.width/this.framesMax*this.scale,this.image.height*this.scale)}animateFrames(){this.framesElapsed++,this.framesElapsed%this.framesHold==0&&(this.framesCurrent<this.framesMax-1?this.framesCurrent++:this.framesCurrent=0)}update(){this.draw(),this.animateFrames()}}class i extends s{constructor(e){let{position:t,velocity:s,color:i="white",imageSrc:a,scale:r=1,framesMax:o=1,offset:h={x:0,y:0}}=e;super({position:t,imageSrc:a,scale:r,framesMax:o,offset:h}),this.velocity=s,this.color=i,this.width=50,this.height=65,this.lastKey,this.attackBox={position:{x:this.position.x,y:this.position.y},offset:h,width:65,height:25},this.isAttacking,this.health=100,this.framesCurrent=0,this.framesElapsed=0,this.framesHold=10}update(){this.draw(),this.animateFrames(),this.attackBox.position.x=this.position.x+this.attackBox.offset.x,this.attackBox.position.y=this.position.y,this.position.y+=this.velocity.y,this.position.x+=this.velocity.x,this.position.y+this.height+this.velocity.y>=e.height-18?this.velocity.y=0:this.velocity.y+=1.3}attack(){this.isAttacking=!0,setTimeout((()=>{this.isAttacking=!1}),100)}}const a=new s({position:{x:0,y:0},imageSrc:"src/assets/village_2 copy.png"}),r=new s({position:{x:351,y:111},imageSrc:"src/assets/spritesheet.png",scale:1.032,framesMax:3}),o=new i({position:{x:50,y:400},velocity:{x:0,y:0},offset:{x:0,y:0},imageSrc:"src/assets/Krillin/idle.png",scale:.75,framesMax:4,offset:{x:0,y:0}}),h=new i({position:{x:924,y:400},velocity:{x:0,y:0},color:"white",offset:{x:-50,y:0},imageSrc:"src/assets/Krillin/1.png",scale:1.1,framesMax:1}),c={a:{pressed:!1},d:{pressed:!1},w:{pressed:!1},ArrowRight:{pressed:!1},ArrowLeft:{pressed:!1},ArrowUp:{pressed:!1}};function l(e){let{rectangle1:t,rectangle2:s}=e;return t.attackBox.position.x+t.attackBox.width>=s.position.x&&t.attackBox.position.x<=s.position.x+s.width&&t.attackBox.position.y+t.attackBox.height>=s.position.y&&t.attackBox.position.y<=s.position.y+s.height}function n(e){let{player:t,enemy:s,timerId:i}=e;clearTimeout(i),document.querySelector("#displayTie").style.display="flex",t.health===s.health?document.querySelector("#displayTie").innerHTML="Tie":t.health>s.health?document.querySelector("#displayTie").innerHTML="Player 1 Wins!":t.health<s.health&&(document.querySelector("#displayTie").innerHTML="Player 2 Wins!")}let d,y=15;!function e(){y>0&&(d=setTimeout(e,1e3),y--,document.querySelector("#timer").innerHTML=y),0===y&&n({player:o,enemy:h,timerId:d})}(),function s(){window.requestAnimationFrame(s),t.fillStyle="black",t.fillRect(0,0,e.width,e.height),a.update(),r.update(),o.update(),h.update(),o.velocity.x=0,h.velocity.x=0,c.a.pressed&&"a"===o.lastKey?o.velocity.x=-7:c.d.pressed&&"d"===o.lastKey&&(o.velocity.x=7),c.ArrowLeft.pressed&&"ArrowLeft"===h.lastKey?h.velocity.x=-7:c.ArrowRight.pressed&&"ArrowRight"===h.lastKey&&(h.velocity.x=7),l({rectangle1:o,rectangle2:h})&&o.isAttacking&&(o.isAttacking=!1,h.health-=10,document.querySelector("#enemy-health").style.width=h.health+"%",console.log("player attack successful")),l({rectangle1:h,rectangle2:o})&&h.isAttacking&&(h.isAttacking=!1,o.health-=10,document.querySelector("#player-health").style.width=o.health+"%",console.log("enemy attack successful")),(o.health<=0||h.health<=0)&&n({player:o,enemy:h,timerId:d})}(),window.addEventListener("keydown",(e=>{switch(e.key){case"d":c.d.pressed=!0,o.lastKey="d";break;case"a":c.a.pressed=!0,o.lastKey="a";break;case"w":o.velocity.y=-25;break;case",":o.attack();break;case"ArrowRight":c.ArrowRight.pressed=!0,h.lastKey="ArrowRight";break;case"ArrowLeft":c.ArrowLeft.pressed=!0,h.lastKey="ArrowLeft";break;case"ArrowUp":h.velocity.y=-25;break;case"ArrowDown":h.attack()}})),window.addEventListener("keyup",(e=>{switch(e.key){case"d":c.d.pressed=!1;break;case"a":c.a.pressed=!1;break;case"w":c.w.pressed=!1}switch(e.key){case"ArrowRight":c.ArrowRight.pressed=!1;break;case"ArrowLeft":c.ArrowLeft.pressed=!1;break;case"ArrowUp":c.ArrowUp.pressed=!1}}))}));
//# sourceMappingURL=main.js.map